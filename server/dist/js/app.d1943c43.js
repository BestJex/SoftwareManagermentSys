(function(e){function t(t){for(var n,i,o=t[0],l=t[1],c=t[2],m=0,p=[];m<o.length;m++)i=o[m],Object.prototype.hasOwnProperty.call(a,i)&&a[i]&&p.push(a[i][0]),a[i]=0;for(n in l)Object.prototype.hasOwnProperty.call(l,n)&&(e[n]=l[n]);u&&u(t);while(p.length)p.shift()();return s.push.apply(s,c||[]),r()}function r(){for(var e,t=0;t<s.length;t++){for(var r=s[t],n=!0,o=1;o<r.length;o++){var l=r[o];0!==a[l]&&(n=!1)}n&&(s.splice(t--,1),e=i(i.s=r[0]))}return e}var n={},a={app:0},s=[];function i(t){if(n[t])return n[t].exports;var r=n[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,i),r.l=!0,r.exports}i.m=e,i.c=n,i.d=function(e,t,r){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(i.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)i.d(r,n,function(t){return e[t]}.bind(null,n));return r},i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],l=o.push.bind(o);o.push=t,o=o.slice();for(var c=0;c<o.length;c++)t(o[c]);var u=l;s.push([0,"chunk-vendors"]),r()})({0:function(e,t,r){e.exports=r("56d7")},"034f":function(e,t,r){"use strict";var n=r("85ec"),a=r.n(n);a.a},"0cda":function(e,t,r){"use strict";var n=r("bf97"),a=r.n(n);a.a},"14f2":function(e,t,r){"use strict";var n=r("18b2"),a=r.n(n);a.a},"18b2":function(e,t,r){},"22de":function(e,t,r){"use strict";var n=r("8319"),a=r.n(n);a.a},"30cd":function(e,t,r){},"56d7":function(e,t,r){"use strict";r.r(t);r("e260"),r("e6cf"),r("cca6"),r("a79d");var n=r("2b0e"),a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{attrs:{id:"app"}},[r("router-view")],1)},s=[],i=(r("034f"),r("2877")),o={},l=Object(i["a"])(o,a,s,!1,null,null,null),c=l.exports,u=r("5c96"),m=r.n(u);r("0fae");n["default"].use(m.a);var p=r("8c4f"),d=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("el-container",[r("el-header",{staticStyle:{"text-align":"right","font-size":"12px"}},[r("h1",{attrs:{id:"title"}},[e._v("anyTitle")]),r("el-dropdown",[r("i",{staticClass:"el-icon-setting",staticStyle:{"margin-right":"15px"}}),r("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[r("el-dropdown-item",[e._v("查看")]),r("el-dropdown-item",[e._v("注销")])],1)],1),r("span",[e._v("Admin")])],1),r("el-container",{staticStyle:{height:"100vh"}},[r("el-aside",{staticStyle:{"background-color":"rgb(238, 241, 246)"},attrs:{width:"200px"}},[r("el-menu",{attrs:{router:"","default-openeds":["1"]}},[r("el-menu-item",{attrs:{index:"/home"}},[r("i",{staticClass:"el-icon-menu"}),r("span",{attrs:{slot:"title"},slot:"title"},[e._v("首页")])]),r("el-submenu",{attrs:{index:"1"}},[r("template",{slot:"title"},[r("i",{staticClass:"el-icon-s-order"}),e._v("版本管理 ")]),r("el-menu-item-group",[r("template",{slot:"title"},[e._v("Mc")]),r("el-menu-item",{attrs:{index:"/mc/create"}},[e._v("上传MC")]),r("el-menu-item",{attrs:{index:"/mc/list"}},[e._v("MC列表")])],2),r("el-menu-item-group",[r("template",{slot:"title"},[e._v("An")]),r("el-menu-item",{attrs:{index:"/an/create"}},[e._v("上传AN")]),r("el-menu-item",{attrs:{index:"/an/list"}},[e._v("AN列表")])],2),r("el-menu-item-group",[r("template",{slot:"title"},[e._v("Ac")]),r("el-menu-item",{attrs:{index:"/ac/create"}},[e._v("上传AC")]),r("el-menu-item",{attrs:{index:"/ac/list"}},[e._v("AC列表")])],2)],2)],1),r("el-menu",{attrs:{router:"","default-openeds":["1"]}},[r("el-submenu",{attrs:{index:"1"}},[r("template",{slot:"title"},[r("i",{staticClass:"el-icon-s-data"}),e._v("项目管理 ")]),r("el-menu-item-group",[r("template",{slot:"title"},[e._v("项目")]),r("el-menu-item",{staticClass:"projectCreate",attrs:{index:"/project/create"}},[e._v("创建项目")]),r("el-menu-item",{attrs:{index:"/project/list"}},[e._v("项目列表")])],2)],2)],1)],1),r("el-container",[r("el-main",[r("router-view")],1)],1)],1)],1)},h=[],f=(r("cb29"),{name:"McCreate",data:function(){var e={date:"2019-12-14",name:"217",address:"版本管理 版本管理"};return{tableData:Array(20).fill(e)}}}),v=f,g=(r("22de"),Object(i["a"])(v,d,h,!1,null,null,null)),b=g.exports,_=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"Mc",attrs:{name:"createMC"}},[r("h1",{attrs:{name:"title"}},[e._v(e._s(e.id?"编辑":"上传")+"MC:")]),r("el-form",{ref:"model",staticClass:"sendItem",attrs:{rules:e.rules,model:e.model,"label-width":"120px"},nativeOn:{submit:function(t){return t.preventDefault(),e.save("model")}}},[r("el-form-item",{attrs:{label:"版本号",prop:"versionNumber"}},[r("el-input",{attrs:{id:"versionNum",maxlength:"16"},model:{value:e.model.versionNumber,callback:function(t){e.$set(e.model,"versionNumber",t)},expression:"model.versionNumber"}})],1),r("el-form-item",{attrs:{label:"关联项目",prop:"relatedProject"}},[r("el-select",{attrs:{"value-key":"model.relatedProject._id",multiple:"",placeholder:"请选择"},model:{value:e.model.relatedProject,callback:function(t){e.$set(e.model,"relatedProject",t)},expression:"model.relatedProject"}},e._l(e.projectList,(function(e){return r("el-option",{key:e._id,attrs:{label:e.projectName,value:e._id}})})),1)],1),r("el-form-item",{attrs:{label:"版本特性",prop:"versionFeatures"}},[r("vue-editor",{model:{value:e.model.versionFeatures,callback:function(t){e.$set(e.model,"versionFeatures",t)},expression:"model.versionFeatures"}})],1),r("el-form-item",{attrs:{label:"Mc版本"}},[e.model.fileName?r("el-row",[r("el-link",{staticClass:"fileLink",attrs:{href:e.model.fileDir,target:"_blank"}},[e._v(e._s(e.model.fileName))]),r("el-button",{attrs:{size:"mini",type:"danger",icon:"el-icon-delete",circle:""},on:{click:e.removeFile}})],1):e._e(),e.model.fileName?e._e():r("div",[r("el-upload",{staticClass:"file-upload",attrs:{action:"http://localhost:3322/api/upload","on-success":e.afterSuccess,"before-upload":e.handleProgress,data:e.fileData}},[r("el-button",{attrs:{size:"small",type:"primary"}},[e._v("点击上传")]),r("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e._v("只能上传jpg/png文件，且不超过500kb")])],1)],1)],1),r("el-form-item",{staticStyle:{"margin-top":"1rem"}},[r("el-button",{staticClass:"save",attrs:{type:"primary","native-type":"subumit"}},[e._v("保存")])],1)],1)],1)},x=[],w=(r("99af"),r("b0c0"),r("d3b7"),r("96cf"),r("5873")),y={name:"McCreate",props:{id:{}},data:function(){return{model:{fileName:""},projectList:[],fileData:{fileName:""},rules:{versionNumber:[{required:!0,message:"请输入版本号",trigger:"blur"},{min:3,max:15,message:"长度在 3 到 15 个字符",trigger:"blur"}],relatedProject:[{type:"array",required:!0,message:"请选择关联项目",trigger:"blur"}],versionFeatures:[{required:!0,message:"请输入版本特性",trigger:"blur"}]}}},components:{VueEditor:w["a"]},methods:{fetchProject:function(){var e;return regeneratorRuntime.async((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,regeneratorRuntime.awrap(this.$http.get("rest/project"));case 2:e=t.sent,this.projectList=e.data;case 4:case"end":return t.stop()}}),null,this)},fetchEdit:function(){var e;return regeneratorRuntime.async((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,regeneratorRuntime.awrap(this.$http.get("rest/mc/".concat(this.id)));case 2:e=t.sent,this.model=e.data;case 4:case"end":return t.stop()}}),null,this)},save:function(e){return regeneratorRuntime.async((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,regeneratorRuntime.awrap(this.$refs[e].validate());case 2:if(!this.id){t.next=9;break}return this.model.upDateTime=(new Date).toLocaleString(),t.next=6,regeneratorRuntime.awrap(this.$http.put("rest/mc/".concat(this.id),this.model));case 6:t.sent,t.next=12;break;case 9:return t.next=11,regeneratorRuntime.awrap(this.$http.post("rest/mc",this.model));case 11:t.sent;case 12:this.$router.push("/mc/list"),this.$notify({title:"成功",type:"success",message:"保存成功"});case 14:case"end":return t.stop()}}),null,this)},afterSuccess:function(e){this.model.fileDir=e.url,this.model.fileName=e.filename},handleProgress:function(e){var t,r;return regeneratorRuntime.async((function(n){while(1)switch(n.prev=n.next){case 0:if(!(e.size>1e8)){n.next=3;break}return this.$confirm("文件大小不可以超过100M"),n.abrupt("return",!1);case 3:if(""!=this.model.versionNumber){n.next=6;break}return this.$confirm("必须输入版本号"),n.abrupt("return",!1);case 6:if(""!=this.model.relatedProject){n.next=9;break}return this.$confirm("必须选择关联项目"),n.abrupt("return",!1);case 9:return t=this.model.relatedProject[0],this.id&&(t=this.model.relatedProject[0]._id),console.log("reID",t),n.next=14,regeneratorRuntime.awrap(this.$http.get("/rest/project/".concat(t)));case 14:return r=n.sent,n.abrupt("return",this.fileData.fileName="Mc_".concat(this.model.versionNumber,"_").concat(r.data.projectName,"_").concat(e.name));case 16:case"end":return n.stop()}}),null,this)},removeFile:function(){var e=this;return console.log(this.model),this.$confirm("确定移除 ".concat(this.model.fileName,"？")).then((function(){return regeneratorRuntime.async((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,regeneratorRuntime.awrap(e.$http.delete("/deleteFile/".concat(e.model.fileName)));case 2:t.sent,e.model.fileName="";case 4:case"end":return t.stop()}}))})).catch((function(e){console.log("删除文件错误：",e)}))}},created:function(){this.id&&this.fetchEdit(),this.fetchProject()}},j=y,$=(r("bb3a"),Object(i["a"])(j,_,x,!1,null,null,null)),N=$.exports,C=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("h1",[e._v("Mc列表:")]),r("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableProps.slice((e.currentPage-1)*e.pagesize,e.currentPage*e.pagesize),"default-sort":{prop:"items",order:"descending"}}},[r("el-table-column",{attrs:{sortable:"",prop:"createTime",label:"创建时间"}}),r("el-table-column",{attrs:{sortable:"",prop:"versionNumber",label:"版本号"}}),r("el-table-column",{attrs:{fixed:"right",label:"操作",width:"300"},scopedSlots:e._u([{key:"header",fn:function(t){return[r("el-input",{attrs:{size:"mini",placeholder:"输入关键字搜索"},on:{input:e.SearchTable},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}})]}},{key:"default",fn:function(t){return[r("el-button",{attrs:{type:"text",size:"small"},on:{click:function(r){return e.$router.push("/mc/view/"+t.row._id)}}},[e._v("查看")]),r("el-button",{attrs:{type:"text",size:"small"},on:{click:function(r){return e.$router.push("/mc/edit/"+t.row._id)}}},[e._v("编辑")]),r("el-button",{attrs:{type:"text",size:"small"},on:{click:function(r){return e.remove(t.row)}}},[e._v("删除")])]}}])})],1),r("el-pagination",{attrs:{"current-page":e.currentPage,"page-sizes":[5,10,20,40],"page-size":e.pagesize,layout:"total, prev, next, jumper",total:e.items.length},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)},k=[],P=(r("4de4"),r("caad"),r("2532"),r("841c"),{name:"mcList",data:function(){return{items:[],search:"",tableProps:[],currentPage:1,pagesize:10}},methods:{handleSizeChange:function(e){this.pagesize=e,console.log(this.pagesize)},handleCurrentChange:function(e){this.currentPage=e,console.log(this.currentPage),this.tableProps=this.items},fetch:function(){var e;return regeneratorRuntime.async((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,regeneratorRuntime.awrap(this.$http.get("/rest/mc"));case 2:e=t.sent,this.items=e.data,this.tableProps=this.items,console.log(e);case 6:case"end":return t.stop()}}),null,this)},SearchTable:function(){var e=this,t=this.items.filter((function(t){return!e.search||t.versionNumber.toLowerCase().includes(e.search.toLowerCase())}));this.tableProps=t},remove:function(e){var t=this;return regeneratorRuntime.async((function(r){while(1)switch(r.prev=r.next){case 0:this.$confirm("确定删除 ".concat(e.versionNumber," 吗？,该操作不可逆"),"确认信息",{distinguishCancelAndClose:!0,confirmButtonText:"确定",cancelButtonText:"取消"}).then((function(){return regeneratorRuntime.async((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,regeneratorRuntime.awrap(t.$http.delete("/rest/mc/".concat(e._id)));case 2:if(" "!=e.fileName&&void 0!=e.fileName){r.next=5;break}return r.next=5,regeneratorRuntime.awrap(t.$http.delete("/deleteFile/".concat(e.fileName)));case 5:t.fetch(),t.$notify({title:"成功",type:"success",message:"删除成功"});case 7:case"end":return r.stop()}}))})).catch((function(e){console.log("删除错误",e)}));case 1:case"end":return r.stop()}}),null,this)}},created:function(){this.fetch()}}),R=P,z=Object(i["a"])(R,C,k,!1,null,null,null),S=z.exports,F=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("h1",[e._v("版本："+e._s(e.model.versionNumber))]),r("el-tabs",{attrs:{type:"border-card"}},[r("el-tab-pane",{attrs:{label:"下载版本"}},[r("div",{staticClass:"versionItem"},[r("p",[e._v("版本号: "+e._s(e.model.versionNumber))])]),r("div",{staticClass:"versionItem"},[e._v(" 相关项目: "),e._l(e.model.relatedProject,(function(t){return r("el-tag",{key:t._id,attrs:{size:"small"}},[e._v(e._s(t.projectName))])}))],2),r("div",{staticClass:"versionItem"},[e._v(" 下载项目: "),r("el-link",{attrs:{href:e.model.fileDir,type:"info"}},[e._v(e._s(e.model.fileName))])],1)]),r("el-tab-pane",{attrs:{label:"版本信息"}},[e._v("版本信息")]),r("el-tab-pane",{attrs:{label:"版本审计"}},[e._v("版本审计")])],1)],1)},D=[],L={name:"mcView",props:{id:{}},data:function(){return{model:{}}},methods:{fetchItem:function(){var e;return regeneratorRuntime.async((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,regeneratorRuntime.awrap(this.$http.get("/rest/mc/".concat(this.id)));case 2:e=t.sent,this.model=e.data,console.log(this.model);case 5:case"end":return t.stop()}}),null,this)}},created:function(){this.id&&this.fetchItem()}},O=L,E=(r("83192"),Object(i["a"])(O,F,D,!1,null,"6249d5ea",null)),M=E.exports,I=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"Mc",attrs:{name:"createMC"}},[r("h1",{attrs:{name:"title"}},[e._v(e._s(e.id?"编辑":"上传")+"An:")]),r("el-form",{ref:"model",staticClass:"sendItem",attrs:{rules:e.rules,model:e.model,"label-width":"120px"},nativeOn:{submit:function(t){return t.preventDefault(),e.save("model")}}},[r("el-form-item",{attrs:{label:"版本号",prop:"versionNumber"}},[r("el-input",{attrs:{id:"versionNum",maxlength:"16"},model:{value:e.model.versionNumber,callback:function(t){e.$set(e.model,"versionNumber",t)},expression:"model.versionNumber"}})],1),r("el-form-item",{attrs:{label:"关联项目",prop:"relatedProject"}},[r("el-select",{attrs:{"value-key":"model.relatedProject._id",multiple:"",placeholder:"请选择"},model:{value:e.model.relatedProject,callback:function(t){e.$set(e.model,"relatedProject",t)},expression:"model.relatedProject"}},e._l(e.projectList,(function(e){return r("el-option",{key:e._id,attrs:{label:e.projectName,value:e._id}})})),1)],1),r("el-form-item",{attrs:{label:"版本特性",prop:"versionFeatures"}},[r("vue-editor",{model:{value:e.model.versionFeatures,callback:function(t){e.$set(e.model,"versionFeatures",t)},expression:"model.versionFeatures"}})],1),r("el-form-item",{attrs:{label:"Mc版本"}},[e.model.fileName?r("el-row",[r("el-link",{staticClass:"fileLink",attrs:{href:e.model.fileDir,target:"_blank"}},[e._v(e._s(e.model.fileName))]),r("el-button",{attrs:{size:"mini",type:"danger",icon:"el-icon-delete",circle:""},on:{click:e.removeFile}})],1):e._e(),e.model.fileName?e._e():r("div",[r("el-upload",{staticClass:"file-upload",attrs:{action:"http://localhost:3322/api/upload","on-success":e.afterSuccess,"before-upload":e.handleProgress,data:e.fileData}},[r("el-button",{attrs:{size:"small",type:"primary"}},[e._v("点击上传")]),r("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e._v("只能上传jpg/png文件，且不超过500kb")])],1)],1)],1),r("el-form-item",{staticStyle:{"margin-top":"1rem"}},[r("el-button",{staticClass:"save",attrs:{type:"primary","native-type":"subumit"}},[e._v("保存")])],1)],1)],1)},T=[],A={name:"AnCreate",props:{id:{}},data:function(){return{model:{fileName:""},projectList:[],fileData:{fileName:""},rules:{versionNumber:[{required:!0,message:"请输入版本号",trigger:"blur"},{min:3,max:15,message:"长度在 3 到 15 个字符",trigger:"blur"}],relatedProject:[{type:"array",required:!0,message:"请选择关联项目",trigger:"blur"}],versionFeatures:[{required:!0,message:"请输入版本特性",trigger:"blur"}]}}},components:{VueEditor:w["a"]},methods:{fetchProject:function(){var e;return regeneratorRuntime.async((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,regeneratorRuntime.awrap(this.$http.get("rest/project"));case 2:e=t.sent,this.projectList=e.data;case 4:case"end":return t.stop()}}),null,this)},fetchEdit:function(){var e;return regeneratorRuntime.async((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,regeneratorRuntime.awrap(this.$http.get("rest/an/".concat(this.id)));case 2:e=t.sent,this.model=e.data;case 4:case"end":return t.stop()}}),null,this)},save:function(e){return regeneratorRuntime.async((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,regeneratorRuntime.awrap(this.$refs[e].validate());case 2:if(!this.id){t.next=9;break}return this.model.upDateTime=(new Date).toLocaleString(),t.next=6,regeneratorRuntime.awrap(this.$http.put("rest/an/".concat(this.id),this.model));case 6:t.sent,t.next=12;break;case 9:return t.next=11,regeneratorRuntime.awrap(this.$http.post("rest/an",this.model));case 11:t.sent;case 12:this.$router.push("/an/list"),this.$notify({title:"成功",type:"success",message:"保存成功"});case 14:case"end":return t.stop()}}),null,this)},afterSuccess:function(e){this.model.fileDir=e.url,this.model.fileName=e.filename},handleProgress:function(e){var t,r;return regeneratorRuntime.async((function(n){while(1)switch(n.prev=n.next){case 0:if(!(e.size>1e8)){n.next=3;break}return this.$confirm("文件大小不可以超过100M"),n.abrupt("return",!1);case 3:if(""!=this.model.versionNumber){n.next=6;break}return this.$confirm("必须输入版本号"),n.abrupt("return",!1);case 6:if(""!=this.model.relatedProject){n.next=9;break}return this.$confirm("必须选择关联项目"),n.abrupt("return",!1);case 9:return t=this.model.relatedProject[0],this.id&&(t=this.model.relatedProject[0]._id),console.log("reID",t),n.next=14,regeneratorRuntime.awrap(this.$http.get("/rest/project/".concat(t)));case 14:return r=n.sent,n.abrupt("return",this.fileData.fileName="An_".concat(this.model.versionNumber,"_").concat(r.data.projectName,"_").concat(e.name));case 16:case"end":return n.stop()}}),null,this)},removeFile:function(){var e=this;return console.log(this.model),this.$confirm("确定移除 ".concat(this.model.fileName,"？")).then((function(){return regeneratorRuntime.async((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,regeneratorRuntime.awrap(e.$http.delete("/deleteFile/".concat(e.model.fileName)));case 2:t.sent,e.model.fileName="";case 4:case"end":return t.stop()}}))})).catch((function(e){console.log("删除文件错误：",e)}))}},created:function(){this.id&&this.fetchEdit(),this.fetchProject()}},q=A,V=(r("9a33"),Object(i["a"])(q,I,T,!1,null,null,null)),B=V.exports,J=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("h1",[e._v("An列表:")]),r("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableProps.slice((e.currentPage-1)*e.pagesize,e.currentPage*e.pagesize),"default-sort":{prop:"items",order:"descending"}}},[r("el-table-column",{attrs:{sortable:"",prop:"createTime",label:"创建时间"}}),r("el-table-column",{attrs:{sortable:"",prop:"versionNumber",label:"版本号"}}),r("el-table-column",{attrs:{fixed:"right",label:"操作",width:"300"},scopedSlots:e._u([{key:"header",fn:function(t){return[r("el-input",{attrs:{size:"mini",placeholder:"输入关键字搜索"},on:{input:e.SearchTable},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}})]}},{key:"default",fn:function(t){return[r("el-button",{attrs:{type:"text",size:"small"},on:{click:function(r){return e.$router.push("/an/view/"+t.row._id)}}},[e._v("查看")]),r("el-button",{attrs:{type:"text",size:"small"},on:{click:function(r){return e.$router.push("/an/edit/"+t.row._id)}}},[e._v("编辑")]),r("el-button",{attrs:{type:"text",size:"small"},on:{click:function(r){return e.remove(t.row)}}},[e._v("删除")])]}}])})],1),r("el-pagination",{attrs:{"current-page":e.currentPage,"page-sizes":[5,10,20,40],"page-size":e.pagesize,layout:"total, prev, next, jumper",total:e.items.length},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)},U=[],G={name:"mcList",data:function(){return{items:[],search:"",tableProps:[],currentPage:1,pagesize:10}},methods:{handleSizeChange:function(e){this.pagesize=e,console.log(this.pagesize)},handleCurrentChange:function(e){this.currentPage=e,console.log(this.currentPage),this.tableProps=this.items},fetch:function(){var e;return regeneratorRuntime.async((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,regeneratorRuntime.awrap(this.$http.get("/rest/an"));case 2:e=t.sent,this.items=e.data,this.tableProps=this.items,console.log(e);case 6:case"end":return t.stop()}}),null,this)},SearchTable:function(){var e=this,t=this.items.filter((function(t){return!e.search||t.versionNumber.toLowerCase().includes(e.search.toLowerCase())}));this.tableProps=t},remove:function(e){var t=this;return regeneratorRuntime.async((function(r){while(1)switch(r.prev=r.next){case 0:this.$confirm("确定删除 ".concat(e.versionNumber," 吗？,该操作不可逆"),"确认信息",{distinguishCancelAndClose:!0,confirmButtonText:"确定",cancelButtonText:"取消"}).then((function(){return regeneratorRuntime.async((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,regeneratorRuntime.awrap(t.$http.delete("/rest/an/".concat(e._id)));case 2:if(" "!=e.fileName&&void 0!=e.fileName){r.next=5;break}return r.next=5,regeneratorRuntime.awrap(t.$http.delete("/deleteFile/".concat(e.fileName)));case 5:t.fetch(),t.$notify({title:"成功",type:"success",message:"删除成功"});case 7:case"end":return r.stop()}}))})).catch((function(e){console.log("删除错误",e)}));case 1:case"end":return r.stop()}}),null,this)}},created:function(){this.fetch()}},H=G,K=Object(i["a"])(H,J,U,!1,null,null,null),Q=K.exports,W=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("h1",[e._v("版本："+e._s(e.model.versionNumber))]),r("el-tabs",{attrs:{type:"border-card"}},[r("el-tab-pane",{attrs:{label:"下载版本"}},[r("div",{staticClass:"versionItem"},[r("p",[e._v("版本号: "+e._s(e.model.versionNumber))])]),r("div",{staticClass:"versionItem"},[e._v(" 相关项目: "),e._l(e.model.relatedProject,(function(t){return r("el-tag",{key:t._id,attrs:{size:"small"}},[e._v(e._s(t.projectName))])}))],2),r("div",{staticClass:"versionItem"},[e._v(" 下载项目: "),r("el-link",{attrs:{href:e.model.fileDir,type:"info"}},[e._v(e._s(e.model.fileName))])],1)]),r("el-tab-pane",{attrs:{label:"版本信息"}},[e._v("版本信息")]),r("el-tab-pane",{attrs:{label:"版本审计"}},[e._v("版本审计")])],1)],1)},X=[],Y={name:"mcView",props:{id:{}},data:function(){return{model:{}}},methods:{fetchItem:function(){var e;return regeneratorRuntime.async((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,regeneratorRuntime.awrap(this.$http.get("/rest/an/".concat(this.id)));case 2:e=t.sent,this.model=e.data,console.log(this.model);case 5:case"end":return t.stop()}}),null,this)}},created:function(){this.id&&this.fetchItem()}},Z=Y,ee=(r("14f2"),Object(i["a"])(Z,W,X,!1,null,"89d3aaaa",null)),te=ee.exports,re=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"Mc",attrs:{name:"createMC"}},[r("h1",{attrs:{name:"title"}},[e._v(e._s(e.id?"编辑":"上传")+"AC:")]),r("el-form",{ref:"model",staticClass:"sendItem",attrs:{rules:e.rules,model:e.model,"label-width":"120px"},nativeOn:{submit:function(t){return t.preventDefault(),e.save("model")}}},[r("el-form-item",{attrs:{label:"版本号",prop:"versionNumber"}},[r("el-input",{attrs:{id:"versionNum",maxlength:"16"},model:{value:e.model.versionNumber,callback:function(t){e.$set(e.model,"versionNumber",t)},expression:"model.versionNumber"}})],1),r("el-form-item",{attrs:{label:"关联项目",prop:"relatedProject"}},[r("el-select",{attrs:{"value-key":"model.relatedProject._id",multiple:"",placeholder:"请选择"},model:{value:e.model.relatedProject,callback:function(t){e.$set(e.model,"relatedProject",t)},expression:"model.relatedProject"}},e._l(e.projectList,(function(e){return r("el-option",{key:e._id,attrs:{label:e.projectName,value:e._id}})})),1)],1),r("el-form-item",{attrs:{label:"版本特性",prop:"versionFeatures"}},[r("vue-editor",{model:{value:e.model.versionFeatures,callback:function(t){e.$set(e.model,"versionFeatures",t)},expression:"model.versionFeatures"}})],1),r("el-form-item",{attrs:{label:"Mc版本"}},[e.model.fileName?r("el-row",[r("el-link",{staticClass:"fileLink",attrs:{href:e.model.fileDir,target:"_blank"}},[e._v(e._s(e.model.fileName))]),r("el-button",{attrs:{size:"mini",type:"danger",icon:"el-icon-delete",circle:""},on:{click:e.removeFile}})],1):e._e(),e.model.fileName?e._e():r("div",[r("el-upload",{staticClass:"file-upload",attrs:{action:"http://localhost:3322/api/upload","on-success":e.afterSuccess,"before-upload":e.handleProgress,data:e.fileData}},[r("el-button",{attrs:{size:"small",type:"primary"}},[e._v("点击上传")]),r("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e._v("只能上传jpg/png文件，且不超过500kb")])],1)],1)],1),r("el-form-item",{staticStyle:{"margin-top":"1rem"}},[r("el-button",{staticClass:"save",attrs:{type:"primary","native-type":"subumit"}},[e._v("保存")])],1)],1)],1)},ne=[],ae={name:"McCreate",props:{id:{}},data:function(){return{model:{fileName:""},projectList:[],fileData:{fileName:""},rules:{versionNumber:[{required:!0,message:"请输入版本号",trigger:"blur"},{min:3,max:15,message:"长度在 3 到 15 个字符",trigger:"blur"}],relatedProject:[{type:"array",required:!0,message:"请选择关联项目",trigger:"blur"}],versionFeatures:[{required:!0,message:"请输入版本特性",trigger:"blur"}]}}},components:{VueEditor:w["a"]},methods:{fetchProject:function(){var e;return regeneratorRuntime.async((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,regeneratorRuntime.awrap(this.$http.get("rest/project"));case 2:e=t.sent,this.projectList=e.data;case 4:case"end":return t.stop()}}),null,this)},fetchEdit:function(){var e;return regeneratorRuntime.async((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,regeneratorRuntime.awrap(this.$http.get("rest/ac/".concat(this.id)));case 2:e=t.sent,this.model=e.data;case 4:case"end":return t.stop()}}),null,this)},save:function(e){return regeneratorRuntime.async((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,regeneratorRuntime.awrap(this.$refs[e].validate());case 2:if(!this.id){t.next=9;break}return this.model.upDateTime=(new Date).toLocaleString(),t.next=6,regeneratorRuntime.awrap(this.$http.put("rest/ac/".concat(this.id),this.model));case 6:t.sent,t.next=12;break;case 9:return t.next=11,regeneratorRuntime.awrap(this.$http.post("rest/ac/",this.model));case 11:t.sent;case 12:this.$router.push("/ac/list"),this.$notify({title:"成功",type:"success",message:"保存成功"});case 14:case"end":return t.stop()}}),null,this)},afterSuccess:function(e){this.model.fileDir=e.url,this.model.fileName=e.filename},handleProgress:function(e){var t,r;return regeneratorRuntime.async((function(n){while(1)switch(n.prev=n.next){case 0:if(!(e.size>1e8)){n.next=3;break}return this.$confirm("文件大小不可以超过100M"),n.abrupt("return",!1);case 3:if(""!=this.model.versionNumber){n.next=6;break}return this.$confirm("必须输入版本号"),n.abrupt("return",!1);case 6:if(""!=this.model.relatedProject){n.next=9;break}return this.$confirm("必须选择关联项目"),n.abrupt("return",!1);case 9:return t=this.model.relatedProject[0],this.id&&(t=this.model.relatedProject[0]._id),console.log("reID",t),n.next=14,regeneratorRuntime.awrap(this.$http.get("/rest/project/".concat(t)));case 14:return r=n.sent,n.abrupt("return",this.fileData.fileName="Ac_".concat(this.model.versionNumber,"_").concat(r.data.projectName,"_").concat(e.name));case 16:case"end":return n.stop()}}),null,this)},removeFile:function(){var e=this;return console.log(this.model),this.$confirm("确定移除 ".concat(this.model.fileName,"？")).then((function(){return regeneratorRuntime.async((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,regeneratorRuntime.awrap(e.$http.delete("/deleteFile/".concat(e.model.fileName)));case 2:t.sent,e.model.fileName="";case 4:case"end":return t.stop()}}))})).catch((function(e){console.log("删除文件错误：",e)}))}},created:function(){this.id&&this.fetchEdit(),this.fetchProject()}},se=ae,ie=(r("f4c9"),Object(i["a"])(se,re,ne,!1,null,null,null)),oe=ie.exports,le=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("h1",[e._v("Ac列表:")]),r("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableProps.slice((e.currentPage-1)*e.pagesize,e.currentPage*e.pagesize),"default-sort":{prop:"items",order:"descending"}}},[r("el-table-column",{attrs:{sortable:"",prop:"createTime",label:"创建时间"}}),r("el-table-column",{attrs:{sortable:"",prop:"versionNumber",label:"版本号"}}),r("el-table-column",{attrs:{fixed:"right",label:"操作",width:"300"},scopedSlots:e._u([{key:"header",fn:function(t){return[r("el-input",{attrs:{size:"mini",placeholder:"输入关键字搜索"},on:{input:e.SearchTable},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}})]}},{key:"default",fn:function(t){return[r("el-button",{attrs:{type:"text",size:"small"},on:{click:function(r){return e.$router.push("/ac/view/"+t.row._id)}}},[e._v("查看")]),r("el-button",{attrs:{type:"text",size:"small"},on:{click:function(r){return e.$router.push("/ac/edit/"+t.row._id)}}},[e._v("编辑")]),r("el-button",{attrs:{type:"text",size:"small"},on:{click:function(r){return e.remove(t.row)}}},[e._v("删除")])]}}])})],1),r("el-pagination",{attrs:{"current-page":e.currentPage,"page-sizes":[5,10,20,40],"page-size":e.pagesize,layout:"total, prev, next, jumper",total:e.items.length},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)},ce=[],ue={name:"mcList",data:function(){return{items:[],search:"",tableProps:[],currentPage:1,pagesize:10}},methods:{handleSizeChange:function(e){this.pagesize=e,console.log(this.pagesize)},handleCurrentChange:function(e){this.currentPage=e,console.log(this.currentPage),this.tableProps=this.items},fetch:function(){var e;return regeneratorRuntime.async((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,regeneratorRuntime.awrap(this.$http.get("/rest/ac"));case 2:e=t.sent,this.items=e.data,this.tableProps=this.items,console.log(e);case 6:case"end":return t.stop()}}),null,this)},SearchTable:function(){var e=this,t=this.items.filter((function(t){return!e.search||t.versionNumber.toLowerCase().includes(e.search.toLowerCase())}));this.tableProps=t},remove:function(e){var t=this;return regeneratorRuntime.async((function(r){while(1)switch(r.prev=r.next){case 0:this.$confirm("确定删除 ".concat(e.versionNumber," 吗？,该操作不可逆"),"确认信息",{distinguishCancelAndClose:!0,confirmButtonText:"确定",cancelButtonText:"取消"}).then((function(){return regeneratorRuntime.async((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,regeneratorRuntime.awrap(t.$http.delete("/rest/Ac/".concat(e._id)));case 2:if(" "!=e.fileName&&void 0!=e.fileName){r.next=5;break}return r.next=5,regeneratorRuntime.awrap(t.$http.delete("/deleteFile/".concat(e.fileName)));case 5:t.fetch(),t.$notify({title:"成功",type:"success",message:"删除成功"});case 7:case"end":return r.stop()}}))})).catch((function(e){console.log("删除错误",e)}));case 1:case"end":return r.stop()}}),null,this)}},created:function(){this.fetch()}},me=ue,pe=Object(i["a"])(me,le,ce,!1,null,null,null),de=pe.exports,he=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("h1",[e._v("版本："+e._s(e.model.versionNumber))]),r("el-tabs",{attrs:{type:"border-card"}},[r("el-tab-pane",{attrs:{label:"下载版本"}},[r("div",{staticClass:"versionItem"},[r("p",[e._v("版本号: "+e._s(e.model.versionNumber))])]),r("div",{staticClass:"versionItem"},[e._v(" 相关项目: "),e._l(e.model.relatedProject,(function(t){return r("el-tag",{key:t._id,attrs:{size:"small"}},[e._v(e._s(t.projectName))])}))],2),r("div",{staticClass:"versionItem"},[e._v(" 下载项目: "),r("el-link",{attrs:{href:e.model.fileDir,type:"info"}},[e._v(e._s(e.model.fileName))])],1)]),r("el-tab-pane",{attrs:{label:"版本信息"}},[e._v("版本信息")]),r("el-tab-pane",{attrs:{label:"版本审计"}},[e._v("版本审计")])],1)],1)},fe=[],ve={name:"mcView",props:{id:{}},data:function(){return{model:{}}},methods:{fetchItem:function(){var e;return regeneratorRuntime.async((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,regeneratorRuntime.awrap(this.$http.get("/rest/ac/".concat(this.id)));case 2:e=t.sent,this.model=e.data,console.log(this.model);case 5:case"end":return t.stop()}}),null,this)}},created:function(){this.id&&this.fetchItem()}},ge=ve,be=(r("0cda"),Object(i["a"])(ge,he,fe,!1,null,"02d10d8b",null)),_e=be.exports,xe=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"Mc"},[r("h1",{staticClass:"title"},[e._v("创建项目:")]),r("el-form",{ref:"model",attrs:{model:e.model,"label-width":"120px",name:"CreateProject"},nativeOn:{submit:function(t){return t.preventDefault(),e.save("model")}}},[r("el-form-item",{attrs:{label:"项目名称",prop:"projectName"}},[r("el-input",{staticClass:"projectName",attrs:{maxlength:"10"},model:{value:e.model.projectName,callback:function(t){e.$set(e.model,"projectName",t)},expression:"model.projectName"}})],1),r("el-form-item",{attrs:{label:"项目简介",prop:"projectFeatures"}},[r("el-input",{staticClass:"projectFeatures",model:{value:e.model.projectFeatures,callback:function(t){e.$set(e.model,"projectFeatures",t)},expression:"model.projectFeatures"}})],1),r("el-form-item",{staticStyle:{"margin-top":"1rem"}},[r("el-button",{staticClass:"sendProjectItem",attrs:{type:"primary","native-type":"subumit"}},[e._v("保存")])],1)],1)],1)},we=[],ye={name:"createProject",props:{id:{}},data:function(){return{model:{},rules:{projectName:[{required:!0,message:"请输入项目名称",trigger:"blur"},{min:3,max:15,message:"长度在 3 到 15 个字符",trigger:"blur"}],projectFeatures:[{required:!0,message:"请输入项目简介",trigger:"blur"},{min:3,max:15,message:"长度在 3 到 15 个字符",trigger:"blur"}]}}},methods:{fetchItem:function(){var e;return regeneratorRuntime.async((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,regeneratorRuntime.awrap(this.$http.get("/rest/project/".concat(this.id)));case 2:e=t.sent,this.model=e.data;case 4:case"end":return t.stop()}}),null,this)},save:function(e){return regeneratorRuntime.async((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,regeneratorRuntime.awrap(this.$refs[e].validate());case 2:if(!this.id){t.next=7;break}return t.next=5,regeneratorRuntime.awrap(this.$http.put("rest/project/".concat(this.id),this.model));case 5:t.next=10;break;case 7:return t.next=9,regeneratorRuntime.awrap(this.$http.post("rest/project",this.model));case 9:this.$notify({title:"成功",type:"success",message:"添加项目成功"});case 10:this.$router.push("/project/list");case 11:case"end":return t.stop()}}),null,this)}},created:function(){this.id&&this.fetchItem()}},je=ye,$e=Object(i["a"])(je,xe,we,!1,null,null,null),Ne=$e.exports,Ce=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("h1",{staticClass:"title"},[e._v("项目列表:")]),r("el-table",{staticStyle:{width:"100%"},attrs:{data:e.items,border:""}},[r("el-table-column",{attrs:{prop:"projectName",label:"项目名称"}}),r("el-table-column",{attrs:{prop:"projectFeatures",label:"项目简介"}}),r("el-table-column",{attrs:{fixed:"right",label:"操作",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-button",{attrs:{type:"text",size:"small"},on:{click:function(r){return e.handleClick(t.row)}}},[e._v("查看")]),r("el-button",{attrs:{type:"text",size:"small"},on:{click:function(r){return e.$router.push("/project/edit/"+t.row._id)}}},[e._v("编辑")]),r("el-button",{attrs:{type:"text",size:"small"},on:{click:function(r){return e.remove(t.row)}}},[e._v("删除")])]}}])})],1)],1)},ke=[],Pe={name:"mcList",data:function(){return{items:[]}},methods:{fetch:function(){var e;return regeneratorRuntime.async((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,regeneratorRuntime.awrap(this.$http.get("/rest/project"));case 2:e=t.sent,this.items=e.data,console.log(e);case 5:case"end":return t.stop()}}),null,this)},remove:function(e){var t=this;return regeneratorRuntime.async((function(r){while(1)switch(r.prev=r.next){case 0:this.$confirm("确定删除 ".concat(e._id," 吗？,该操作不可逆"),"确认信息",{distinguishCancelAndClose:!0,confirmButtonText:"确定",cancelButtonText:"取消"}).then((function(){return regeneratorRuntime.async((function(r){while(1)switch(r.prev=r.next){case 0:return console.log(e._id),r.next=3,regeneratorRuntime.awrap(t.$http.delete("/rest/project/".concat(e._id)));case 3:r.sent,t.$notify({title:"成功",type:"success",message:"删除成功"}),t.fetch();case 6:case"end":return r.stop()}}))}));case 1:case"end":return r.stop()}}),null,this)}},created:function(){this.fetch()}},Re=Pe,ze=Object(i["a"])(Re,Ce,ke,!1,null,null,null),Se=ze.exports,Fe=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("h1",[e._v("首页")])},De=[],Le={},Oe=Le,Ee=Object(i["a"])(Oe,Fe,De,!1,null,null,null),Me=Ee.exports;n["default"].use(p["a"]);var Ie=new p["a"]({routes:[{path:"/",name:"Main",component:b,children:[{path:"/mc/create",name:"mcCreate",component:N},{path:"/mc/edit/:id",name:"mcEdit",component:N,props:!0},{path:"/mc/view/:id",name:"mcView",component:M,props:!0},{path:"/mc/list",name:"mcList",component:S},{path:"/an/create",name:"anCreate",component:B},{path:"/an/edit/:id",name:"anEdit",component:B,props:!0},{path:"/an/view/:id",name:"anView",component:te,props:!0},{path:"/an/list",name:"anList",component:Q},{path:"/ac/create",name:"acCreate",component:oe},{path:"/ac/edit/:id",name:"acEdit",component:oe,props:!0},{path:"/ac/view/:id",name:"acView",component:_e,props:!0},{path:"/ac/list",name:"acList",component:de},{path:"/project/create",name:"projectCreate",component:Ne},{path:"/project/edit/:id",name:"projectEdit",component:Ne,props:!0},{path:"/project/list",name:"projectList",component:Se},{path:"/home",name:"home",component:Me}]}]}),Te=r("bc3a"),Ae=r.n(Te),qe=Ae.a.create({baseURL:"http://localhost:3322/api"});console.log("http://localhost:3322/api");var Ve=qe;n["default"].config.productionTip=!1,n["default"].prototype.$http=Ve,new n["default"]({router:Ie,render:function(e){return e(c)}}).$mount("#app")},"7fc4":function(e,t,r){},8319:function(e,t,r){},83192:function(e,t,r){"use strict";var n=r("30cd"),a=r.n(n);a.a},"85ec":function(e,t,r){},"9a33":function(e,t,r){"use strict";var n=r("fe48"),a=r.n(n);a.a},bb3a:function(e,t,r){"use strict";var n=r("cab1"),a=r.n(n);a.a},bf97:function(e,t,r){},cab1:function(e,t,r){},f4c9:function(e,t,r){"use strict";var n=r("7fc4"),a=r.n(n);a.a},fe48:function(e,t,r){}});
//# sourceMappingURL=app.d1943c43.js.map